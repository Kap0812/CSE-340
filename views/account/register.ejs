<%- include('../partials/head') %>
<%- include('../partials/header') %>

<main>
  <h1><%= title %></h1>
  
  <%- messages() %>
  
  <% if (locals.errors) { %>
    <ul class="notice">
      <% errors.array().forEach(error => { %>
        <li><%= error.msg %></li>
      <% }) %>
    </ul>
  <% } %>
  
  <form id="registrationForm" action="/account/register" method="post">
    <fieldset>
      <legend>Registration Information</legend>
      
      <label for="account_firstname">First Name:</label>
      <input 
        type="text" 
        id="account_firstname" 
        name="account_firstname" 
        required
        value="<%= locals.account_firstname || '' %>"
        placeholder="Enter your first name"
      >
      
      <label for="account_lastname">Last Name:</label>
      <input 
        type="text" 
        id="account_lastname" 
        name="account_lastname" 
        required
        value="<%= locals.account_lastname || '' %>"
        placeholder="Enter your last name"
      >
      
      <label for="account_email">Email Address:</label>
      <input 
        type="email" 
        id="account_email" 
        name="account_email" 
        required
        value="<%= locals.account_email || '' %>"
        placeholder="Enter a valid email address"
      >
      
      <label for="account_password">Password:</label>
      <div class="password-container">
        <input 
          type="password" 
          id="account_password" 
          name="account_password" 
          required
          pattern="^(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])[A-Za-z0-9!@#$%^&*]{12,}$"
          placeholder="Enter your password"
        >
        <button type="button" id="togglePassword" class="toggle-password" aria-label="Toggle password visibility">
          <span id="eyeIcon">ğŸ‘ï¸</span>
        </button>
      </div>
      
      <div class="password-requirements">
        <p><strong>Password Requirements:</strong></p>
        <ul>
          <li>Minimum 12 characters in length</li>
          <li>At least 1 capital letter</li>
          <li>At least 1 number</li>
          <li>At least 1 special character (!@#$%^&*)</li>
        </ul>
      </div>
      
      <button type="submit" class="btn-primary">Register</button>
      
      <p class="login-link">Already have an account? <a href="/account/login">Login here</a></p>
    </fieldset>
  </form>
</main>

<script>
  // Toggle password visibility
  const togglePassword = document.getElementById('togglePassword');
  const passwordInput = document.getElementById('account_password');
  const eyeIcon = document.getElementById('eyeIcon');
  
  if (togglePassword) {
    togglePassword.addEventListener('click', function() {
      const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
      passwordInput.setAttribute('type', type);
      
      // Toggle icon
      eyeIcon.textContent = type === 'password' ? 'ğŸ‘ï¸' : 'ğŸ™ˆ';
    });
  }
</script>

<%- include('../partials/footer') %>